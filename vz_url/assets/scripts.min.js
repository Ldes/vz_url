jQuery(function(b){var a={regex:new RegExp(/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/i),init:function(c){b(".vz_url_field").each(a.check_field);
b(".vz_url_field").live("keyup",a.check_field);},check_field:function(c){$field=b(this);if(a.timer){clearTimeout(a.timer);}a.set_status($field,"checking");
if($field.val()==="http://"||$field.val()===""){a.set_status($field,"empty");return;}else{$field.removeClass("empty");}a.timer=setTimeout(function(){a.ajax_call($field);
},350);},ajax_call:function(d){var c=d.val();if(!a.regex.test(c)){a.set_status(d,"invalid");return false;}if(d.hasClass("local")&&c.substr(0,1)!="/"&&c.indexOf(document.domain)==-1){a.set_status(d,"nonlocal");
return false;}b.getJSON(EE.BASE+"&callback=?",{caller:"vz_url",url:c},function(e){if(e.original!=c){return;}if((e.original==e.final_url)&&(e.http_code>=200)&&(e.http_code<400)){a.set_status(d,"valid");
}else{if(e.original!=e.final_url){a.set_status(d,"redirect",e);}else{a.set_status(d,"invalid");}}});},set_status:function(f,d,e){var c=f.next().empty();
f.removeClass("empty checking invalid valid nonlocal redirect").addClass(d);switch(d){case"empty":case"checking":case"valid":break;case"invalid":c.html(vzUrl_settings.errorText);
break;case"nonlocal":c.html(vzUrl_settings.nonlocalText);break;case"redirect":if(f.hasClass("show_redirect")){c.html(vzUrl_settings.redirectText+" "+e.final_url);
b("<a/>",{text:vzUrl_settings.redirectUpdate,href:"#","data-final_url":e.final_url,click:function(g){f.val(b(this).attr("data-final_url"));a.ajax_call(f);
return false;}}).appendTo(c);}else{f.removeClass("redirect").addClass("valid");}break;}},not_natively_supported:(function(){var c=document.createElement("input");
return !("pattern" in c);})()};a.init();});